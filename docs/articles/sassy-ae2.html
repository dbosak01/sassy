<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example 14: AE Severity in Rows • sassy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Example 14: AE Severity in Rows">
<meta property="og:description" content="sassy">
<meta property="og:image" content="https://sassy.r-sassy.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sassy</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/sassy.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sassy-listing.html">Example 1: Listing</a>
    </li>
    <li>
      <a href="../articles/sassy-dm.html">Example 2: Demographics Table</a>
    </li>
    <li>
      <a href="../articles/sassy-figure.html">Example 3: Figures</a>
    </li>
    <li>
      <a href="../articles/sassy-ae.html">Example 4: Adverse Events Table</a>
    </li>
    <li>
      <a href="../articles/sassy-vs.html">Example 5: Vital Signs Table</a>
    </li>
    <li>
      <a href="../articles/sassy-figureby.html">Example 6: Figure with By Group</a>
    </li>
    <li>
      <a href="../articles/sassy-survival.html">Example 7: Survival Analysis</a>
    </li>
    <li>
      <a href="../articles/sassy-profile.html">Example 8: Patient Profile</a>
    </li>
    <li>
      <a href="../articles/sassy-forest.html">Example 9: Forest Plot</a>
    </li>
    <li>
      <a href="../articles/sassy-ds.html">Example 10: Disposition Table</a>
    </li>
    <li>
      <a href="../articles/sassy-plisting.html">Example 11: Subject Listing</a>
    </li>
    <li>
      <a href="../articles/sassy-pfigure.html">Example 12: Combined Figure</a>
    </li>
    <li>
      <a href="../articles/sassy-chgbase.html">Example 13: Mean Change From Baseline</a>
    </li>
    <li>
      <a href="../articles/sassy-ae2.html">Example 14: AE Severity in Rows</a>
    </li>
    <li>
      <a href="../articles/sassy-intext.html">Example 15: Intext Table</a>
    </li>
    <li>
      <a href="../articles/sassy-shift.html">Example 16: Shift Table</a>
    </li>
    <li>
      <a href="../articles/sassy-disclaimers.html">Disclaimers</a>
    </li>
    <li>
      <a href="../articles/sassy-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/sassy-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/sassy/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example 14: AE Severity in Rows</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/sassy/blob/HEAD/vignettes/sassy-ae2.Rmd" class="external-link"><code>vignettes/sassy-ae2.Rmd</code></a></small>
      <div class="hidden name"><code>sassy-ae2.Rmd</code></div>

    </div>

    
    
<p>The 14th example is similar to the Adverse Events table produced in
Example 4. In this example, however, the severity grades are shown in
rows instead of columns. This table is somewhat easier to read than the
previous example, because the pages do not wrap.</p>
<div class="section level2">
<h2 id="program">Program<a class="anchor" aria-label="anchor" href="#program"></a>
</h2>
<p>Note the following about this example:</p>
<ul>
<li>Functions from the <strong><a href="https://procs.r-sassy.org" class="external-link">procs</a></strong> package make the
code look almost like a SAS® program.</li>
<li>Page breaking is controlled by the user variable PG. This variable
allows you to control when the page breaks occur. Identify the paging
variable using the <em>page_break</em> parameter on the
<code>define()</code> function.</li>
<li>Complexity of the stub column forced this example to perform the
indenting in the data preparation steps. You can always create the stub
column yourself if the <code>stub()</code> function is not allowing you
to do what you need.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-sassy.org" class="external-link">sassy</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"logr.autolog"</span> <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>        <span class="st">"logr.notes"</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        <span class="st">"logr.on"</span> <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        <span class="st">"procs.print"</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get temp directory</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open log</span></span>
<span><span class="va">lf</span> <span class="op">&lt;-</span> <span class="fu">log_open</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"example14.log"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get data</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"sassy"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Get Data ----------------------------------------------------------------</span></span>
<span></span>
<span><span class="fu">sep</span><span class="op">(</span><span class="st">"Prepare Data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create libname for csv data</span></span>
<span><span class="fu">libname</span><span class="op">(</span><span class="va">sdtm</span>, <span class="va">dir</span>, <span class="st">"csv"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Filter DM data"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">sdtm</span><span class="op">$</span><span class="va">DM</span>, </span>
<span>         keep <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">ARM</span>, <span class="va">ARMCD</span><span class="op">)</span>,</span>
<span>         where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">ARM</span> <span class="op">!=</span> <span class="st">"SCREEN FAILURE"</span><span class="op">)</span>, <span class="op">{</span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">dm</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Get population counts"</span><span class="op">)</span></span>
<span><span class="fu">proc_freq</span><span class="op">(</span><span class="va">dm</span>, tables <span class="op">=</span> <span class="va">ARM</span>, </span>
<span>          output <span class="op">=</span> <span class="va">long</span>, </span>
<span>          options <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">nopercent</span>, <span class="va">nonobs</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">arm_pop</span> </span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Prepare table data"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">sdtm</span><span class="op">$</span><span class="va">AE</span>, merge <span class="op">=</span> <span class="va">dm</span>, </span>
<span>         merge_by <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>         merge_in <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">inA</span>, <span class="va">inB</span><span class="op">)</span>,</span>
<span>         keep <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">ARM</span>, <span class="va">AESEV</span>, <span class="va">AESOC</span>, <span class="va">AEDECOD</span><span class="op">)</span>,</span>
<span>         where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">inB</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">inA</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span>, </span>
<span>         <span class="op">{</span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_sub</span> </span>
<span></span>
<span></span>
<span><span class="co"># Prepare Formats ---------------------------------------------------------</span></span>
<span></span>
<span><span class="fu">sep</span><span class="op">(</span><span class="st">"Prepare Formats"</span><span class="op">)</span></span>
<span><span class="va">fc</span> <span class="op">&lt;-</span> <span class="fu">fcat</span><span class="op">(</span>CNT <span class="op">=</span> <span class="st">"%3d"</span>,</span>
<span>           PCT <span class="op">=</span> <span class="st">"(%5.1f)"</span>,</span>
<span>           CAT2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>MILD <span class="op">=</span> <span class="st">"Mild"</span>, </span>
<span>                    MODERATE <span class="op">=</span> <span class="st">"Moderate"</span>, </span>
<span>                    SEVERE <span class="op">=</span> <span class="st">"Severe"</span><span class="op">)</span>,</span>
<span>           SEVN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Mild <span class="op">=</span> <span class="fl">1</span>, Moderate <span class="op">=</span> <span class="fl">2</span>, Severe <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Perform Calculations ----------------------------------------------------</span></span>
<span><span class="fu">sep</span><span class="op">(</span><span class="st">"Perform Calculations"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Get SOC Frequencies"</span><span class="op">)</span></span>
<span><span class="fu">proc_freq</span><span class="op">(</span><span class="va">ae_sub</span>, </span>
<span>          tables <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">AESOC</span> <span class="op">*</span> <span class="va">AESEV</span><span class="op">)</span>,</span>
<span>          by <span class="op">=</span> <span class="st">"ARM"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_soc</span> </span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Combine columns for SOC"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_soc</span>, </span>
<span>         format <span class="op">=</span> <span class="va">fc</span>,</span>
<span>         rename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>VAR1 <span class="op">=</span> <span class="st">"VAR"</span>, CAT1 <span class="op">=</span> <span class="st">"CAT"</span><span class="op">)</span>,</span>
<span>         drop <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">VAR2</span>, <span class="va">CNT</span>, <span class="va">PCT</span><span class="op">)</span>,</span>
<span>         <span class="op">{</span></span>
<span>           <span class="va">VARORD</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>           <span class="va">CNTPCT</span> <span class="op">&lt;-</span> <span class="fu">fapply2</span><span class="op">(</span><span class="va">CNT</span>, <span class="va">PCT</span><span class="op">)</span></span>
<span>           <span class="va">CAT2</span> <span class="op">&lt;-</span> <span class="fu">fapply</span><span class="op">(</span><span class="va">CAT2</span><span class="op">)</span></span>
<span>           </span>
<span>         <span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_soc_c</span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Pivot SOC frequencies"</span><span class="op">)</span></span>
<span><span class="fu">proc_transpose</span><span class="op">(</span><span class="va">ae_soc_c</span>, id <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">BY</span><span class="op">)</span>, </span>
<span>               var <span class="op">=</span> <span class="va">CNTPCT</span>, </span>
<span>               copy <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">VAR</span>, <span class="va">VARORD</span><span class="op">)</span>,</span>
<span>               by <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">CAT</span>, <span class="va">CAT2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">datastep</span><span class="op">(</span>rename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>CAT <span class="op">=</span> <span class="st">"AESOC"</span>, CAT2 <span class="op">=</span> <span class="st">"SEVERITY"</span><span class="op">)</span>, </span>
<span>           drop <span class="op">=</span> <span class="st">"NAME"</span>, <span class="op">{</span></span>
<span>             </span>
<span>               <span class="va">AEDECOD</span> <span class="op">&lt;-</span> <span class="cn">NA_character_</span></span>
<span>             <span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_soc_t</span> </span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Get PT Frequencies"</span><span class="op">)</span></span>
<span><span class="fu">proc_freq</span><span class="op">(</span><span class="va">ae_sub</span>, </span>
<span>          tables <span class="op">=</span> <span class="st">"AEDECOD * AESEV"</span>,</span>
<span>          by <span class="op">=</span> <span class="st">"ARM"</span>,</span>
<span>          options <span class="op">=</span> <span class="va">nonobs</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_pt</span> </span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Get unique SOC and PT combinations"</span><span class="op">)</span></span>
<span><span class="fu">proc_sort</span><span class="op">(</span><span class="va">ae_sub</span>, keep <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">AESOC</span>, <span class="va">AEDECOD</span><span class="op">)</span>, </span>
<span>          by <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">AESOC</span>, <span class="va">AEDECOD</span><span class="op">)</span>, options <span class="op">=</span> <span class="va">nodupkey</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">evnts</span> </span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Combine columns for PT"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_pt</span>, </span>
<span>         format <span class="op">=</span> <span class="va">fc</span>,</span>
<span>         rename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>VAR1 <span class="op">=</span> <span class="st">"VAR"</span>, CAT1 <span class="op">=</span> <span class="st">"CAT"</span><span class="op">)</span>,</span>
<span>         drop <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">VAR2</span>, <span class="va">CNT</span>, <span class="va">PCT</span><span class="op">)</span>,</span>
<span>         <span class="op">{</span></span>
<span>           <span class="va">VARORD</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span>           <span class="va">CNTPCT</span> <span class="op">&lt;-</span> <span class="fu">fapply2</span><span class="op">(</span><span class="va">CNT</span>, <span class="va">PCT</span><span class="op">)</span></span>
<span>           <span class="va">CAT2</span> <span class="op">&lt;-</span> <span class="fu">fapply</span><span class="op">(</span><span class="va">CAT2</span><span class="op">)</span></span>
<span>           </span>
<span>         <span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_pt_c</span> </span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Pivot PT frequencies"</span><span class="op">)</span></span>
<span><span class="fu">proc_transpose</span><span class="op">(</span><span class="va">ae_pt_c</span>, id <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">BY</span><span class="op">)</span>, </span>
<span>               var <span class="op">=</span> <span class="va">CNTPCT</span>, </span>
<span>               copy <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">VAR</span>, <span class="va">VARORD</span><span class="op">)</span>,</span>
<span>               by <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">CAT</span>, <span class="va">CAT2</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_pt_t</span> </span>
<span></span>
<span><span class="va">nms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ae_soc_t</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Join in SOC"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_pt_t</span>, merge <span class="op">=</span> <span class="va">evnts</span>, rename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>CAT2 <span class="op">=</span> <span class="st">"SEVERITY"</span>, CAT <span class="op">=</span> <span class="st">"AEDECOD"</span><span class="op">)</span>, </span>
<span>         merge_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>CAT <span class="op">=</span> <span class="st">"AEDECOD"</span><span class="op">)</span>, <span class="op">{</span></span>
<span>           <span class="va">CAT</span> <span class="op">&lt;-</span> <span class="fu">toTitleCase</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">CAT</span><span class="op">)</span><span class="op">)</span></span>
<span>           <span class="va">AESEVN</span> <span class="op">&lt;-</span> <span class="fu">fapply</span><span class="op">(</span><span class="va">CAT2</span>, <span class="va">fc</span><span class="op">$</span><span class="va">SEVN</span><span class="op">)</span> </span>
<span>         <span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_pt_tj</span> </span>
<span></span>
<span></span>
<span><span class="co"># All Adverse Events ------------------------------------------------------</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Get frequencies for all events"</span><span class="op">)</span></span>
<span><span class="fu">proc_freq</span><span class="op">(</span><span class="va">ae_sub</span>, tables <span class="op">=</span> <span class="st">"AESEV"</span>, by <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">ARM</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">allfreq</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Combine all events."</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">allfreq</span>, format <span class="op">=</span> <span class="va">fc</span>,</span>
<span>         drop <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">N</span>, <span class="va">CNT</span>, <span class="va">PCT</span>, <span class="va">CAT</span><span class="op">)</span>,</span>
<span>         <span class="op">{</span></span>
<span>           </span>
<span>           <span class="va">CNTPCT</span> <span class="op">&lt;-</span> <span class="fu">fapply2</span><span class="op">(</span><span class="va">CNT</span>, <span class="va">PCT</span><span class="op">)</span></span>
<span>           <span class="va">SEVERITY</span> <span class="op">&lt;-</span> <span class="fu">fapply</span><span class="op">(</span><span class="va">CAT</span>, <span class="va">fc</span><span class="op">$</span><span class="va">CAT2</span><span class="op">)</span></span>
<span>           <span class="va">VARORD</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>           </span>
<span>         <span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">allfreqm</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Prepare data for reporting"</span><span class="op">)</span></span>
<span><span class="fu">proc_transpose</span><span class="op">(</span><span class="va">allfreqm</span>, id <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">BY</span><span class="op">)</span>,</span>
<span>               var <span class="op">=</span> <span class="va">CNTPCT</span>, by <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">SEVERITY</span><span class="op">)</span>,</span>
<span>               copy <span class="op">=</span> <span class="fu">v</span><span class="op">(</span><span class="va">VAR</span>, <span class="va">VARORD</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">allfreqt</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Clean up"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">allfreqt</span>, drop <span class="op">=</span> <span class="va">NAME</span>, <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">AESOC</span> <span class="op">&lt;-</span> <span class="st">"All Adverse Events"</span></span>
<span>  <span class="va">AEDECOD</span> <span class="op">&lt;-</span> <span class="st">"All Preferred Terms "</span></span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">allfreqtc</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># Prepare Final Dataframe -------------------------------------------------</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Stack SOC and PT counts"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_soc_t</span>, set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">allfreqtc</span>, <span class="va">ae_pt_tj</span><span class="op">)</span>, </span>
<span>         keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VAR"</span>, <span class="st">"AESOC"</span>, <span class="st">"AEDECOD"</span>, <span class="st">"SEVERITY"</span>, <span class="st">"AESEVN"</span>, <span class="st">"VARORD"</span>, </span>
<span>                  <span class="fu">find.names</span><span class="op">(</span><span class="va">ae_pt_tj</span>, <span class="st">"ARM*"</span><span class="op">)</span><span class="op">)</span>, <span class="op">{</span></span>
<span>                    <span class="va">AESEVN</span> <span class="op">&lt;-</span> <span class="fu">fapply</span><span class="op">(</span><span class="va">SEVERITY</span>, <span class="va">fc</span><span class="op">$</span><span class="va">SEVN</span><span class="op">)</span> </span>
<span>                    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AEDECOD</span><span class="op">)</span><span class="op">)</span></span>
<span>                      <span class="va">AEDECOD</span> <span class="op">&lt;-</span> <span class="st">"All Preferred Terms"</span></span>
<span>                    <span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_soc_pt</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Select desired columns"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_soc_pt</span>, keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AESOC"</span>, <span class="st">"AEDECOD"</span>, <span class="st">"AESEVN"</span>, <span class="st">"VARORD"</span><span class="op">)</span>, </span>
<span>         where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AESEVN</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>, <span class="op">{</span></span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_prep</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Output extra rows"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_prep</span>, <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">AESEVN</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="fu">output</span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">AESEVN</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span></span>
<span>  <span class="fu">output</span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_soc_rows</span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Set additonal rows"</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">ae_soc_pt</span>, set <span class="op">=</span> <span class="va">ae_soc_rows</span>, <span class="op">{</span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ae_all</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Sort combined rows"</span><span class="op">)</span></span>
<span><span class="va">aecombined</span> <span class="op">&lt;-</span> <span class="fu">proc_sort</span><span class="op">(</span><span class="va">ae_all</span>, by <span class="op">=</span> <span class="fu">v</span><span class="op">(</span> <span class="va">AESOC</span>, <span class="va">VARORD</span>, <span class="va">AEDECOD</span>, <span class="va">AESEVN</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Create stub and paging."</span><span class="op">)</span></span>
<span><span class="fu">datastep</span><span class="op">(</span><span class="va">aecombined</span>, retain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>PG <span class="op">=</span> <span class="fl">1</span>, RWNM <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="op">{</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">AESEVN</span> <span class="op">==</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">VAR</span> <span class="op">&lt;-</span> <span class="va">AESOC</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">AESEVN</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">VAR</span> <span class="op">&lt;-</span> <span class="st">"  "</span> <span class="op">%p%</span> <span class="va">AEDECOD</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>    <span class="va">VAR</span> <span class="op">&lt;-</span> <span class="st">"    "</span> <span class="op">%p%</span> <span class="va">SEVERITY</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">RWNM</span> <span class="op">&lt;-</span> <span class="va">RWNM</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">RWNM</span> <span class="op">==</span> <span class="fl">21</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">PG</span> <span class="op">&lt;-</span> <span class="va">PG</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>    <span class="va">RWNM</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">aefinal</span></span>
<span></span>
<span></span>
<span><span class="co"># Print Report ----------------------------------------------------------</span></span>
<span></span>
<span><span class="fu">sep</span><span class="op">(</span><span class="st">"Create and print report"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Create table object"</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">create_table</span><span class="op">(</span><span class="va">aefinal</span>, first_row_blank <span class="op">=</span> <span class="cn">TRUE</span>, width <span class="op">=</span> <span class="fl">9</span>, show_cols <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">column_defaults</span><span class="op">(</span>from <span class="op">=</span> <span class="va">`ARM A`</span>, to <span class="op">=</span> <span class="va">`ARM D`</span>, width <span class="op">=</span> <span class="fl">1</span>, align <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">VAR</span>, label <span class="op">=</span> <span class="st">"System Organ Class\n  Preferred Term\n    Maximum Grade"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">AEDECOD</span>, visible <span class="op">=</span> <span class="cn">FALSE</span>, blank_after <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">`ARM A`</span>, label <span class="op">=</span> <span class="st">"Placebo"</span>, n <span class="op">=</span> <span class="va">arm_pop</span><span class="op">[</span><span class="st">"ARM A"</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">`ARM B`</span>,  label <span class="op">=</span> <span class="st">"Drug A"</span>, n <span class="op">=</span> <span class="va">arm_pop</span><span class="op">[</span><span class="st">"ARM B"</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">`ARM C`</span>, label <span class="op">=</span> <span class="st">"Drug B"</span>, n <span class="op">=</span> <span class="va">arm_pop</span><span class="op">[</span><span class="st">"ARM C"</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">`ARM D`</span>, label <span class="op">=</span> <span class="st">"Drug C"</span>, n <span class="op">=</span> <span class="va">arm_pop</span><span class="op">[</span><span class="st">"ARM D"</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">define</span><span class="op">(</span><span class="va">PG</span>, visible <span class="op">=</span> <span class="cn">FALSE</span>, page_break <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Create report object"</span><span class="op">)</span></span>
<span><span class="va">rpt</span> <span class="op">&lt;-</span> <span class="fu">create_report</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"example14.rtf"</span><span class="op">)</span>, output_type <span class="op">=</span> <span class="st">"RTF"</span>, </span>
<span>                     font_size <span class="op">=</span> <span class="fl">10</span>, font <span class="op">=</span> <span class="st">"Arial"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">page_header</span><span class="op">(</span>left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sponsor: Company"</span>, <span class="st">"Protocol: ABC-123"</span><span class="op">)</span>, </span>
<span>              right <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Page [pg] of [tpg]"</span>, <span class="st">"Database: 2023-10-01"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">titles</span><span class="op">(</span><span class="st">"Table 5.2.4"</span>, <span class="st">"Summary of Treatment-Emergent Adverse Events by MedDRA System Organ Class"</span>,</span>
<span>  <span class="st">"Preferred Term, and Maximum Severity"</span>, <span class="st">"(Safety Population)"</span>, font_size <span class="op">=</span> <span class="fl">12</span>, </span>
<span>  bold <span class="op">=</span> <span class="cn">TRUE</span>, borders <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">add_content</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">footnotes</span><span class="op">(</span><span class="st">"Program: AE_Table.R"</span>,</span>
<span>            <span class="st">"Confidential"</span>, <span class="fu">fapply</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%Y-%m-%d %H:%M:%S"</span><span class="op">)</span>, </span>
<span>            columns <span class="op">=</span> <span class="fl">3</span>,  borders <span class="op">=</span> <span class="st">"top"</span>, blank_row <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">footnotes</span><span class="op">(</span><span class="st">"Treatment-Emergent AEs: any AE either reported for the first time or "</span> <span class="op">%p%</span></span>
<span>              <span class="st">"worsening of a pre-existing event after firstdose of study drug "</span> <span class="op">%p%</span></span>
<span>              <span class="st">"until 31 days after the last dose of study drug"</span>,</span>
<span>            <span class="st">"Note: Participants where counted only once under the highest grade; "</span> <span class="op">%p%</span></span>
<span>              <span class="st">"TEAEs with missing severity were included under 'Any Grade' only."</span>,</span>
<span>            <span class="st">"Severity vs CTCAE Grade: Mild = Grade 1, Moderate = Grade 2, "</span> <span class="op">%p%</span> </span>
<span>              <span class="st">"Severe = Grade 3, Life-Threatening = Grade 4, Fatal = Grade 5."</span>,</span>
<span>            <span class="st">"MedDRA Version: 23.0"</span>, footer <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Print report"</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">write_report</span><span class="op">(</span><span class="va">rpt</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="co"># Clean Up ----------------------------------------------------------------</span></span>
<span><span class="fu">sep</span><span class="op">(</span><span class="st">"Clean Up"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">put</span><span class="op">(</span><span class="st">"Close log"</span><span class="op">)</span></span>
<span><span class="fu">log_close</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Uncomment to view report</span></span>
<span><span class="co"># file.show(res$modified_path)</span></span>
<span></span>
<span><span class="co"># Uncomment to view log</span></span>
<span><span class="co"># file.show(lf)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>Here are the first page of the output report:</p>
<p><img src="../man/images/aevert.png" align="center"></p>
</div>
<div class="section level2">
<h2 id="log">Log<a class="anchor" aria-label="anchor" href="#log"></a>
</h2>
<p>Here is the log from the above example:</p>
<pre><code>=========================================================================
Log Path: C:/Users/dbosa/AppData/Local/Temp/Rtmp4q58ap/log/example13.log
Program Path: C:/packages/Testing/incyte/newcode/aeflipped.R
Working Directory: C:/packages/Testing
User Name: dbosa
R Version: 4.3.1 (2023-06-16 ucrt)
Machine: SOCRATES x86-64
Operating System: Windows 10 x64 build 22621
Base Packages: stats graphics grDevices utils datasets methods base Other
Packages: tidylog_1.0.2 procs_1.0.3 reporter_1.4.2 libr_1.2.8 logr_1.3.4
fmtr_1.6.0 common_1.0.9 sassy_1.2.1
Log Start Time: 2023-10-14 14:26:59.112062
=========================================================================

=========================================================================
Prepare Data
=========================================================================

# library 'sdtm': 7 items
- attributes: csv not loaded
- path: C:/Users/dbosa/AppData/Local/R/win-library/4.3/sassy/extdata
- items:
  Name Extension Rows Cols     Size        LastModified
1   AE       csv  150   27  88.5 Kb 2023-09-30 23:58:49
2   DM       csv   87   24  45.5 Kb 2023-09-30 23:58:49
3   DS       csv  174    9  34.1 Kb 2023-09-30 23:58:49
4   EX       csv   84   11  26.4 Kb 2023-09-30 23:58:49
5   IE       csv    2   14  13.4 Kb 2023-09-30 23:58:49
6   SV       csv  685   10  70.3 Kb 2023-09-30 23:58:49
7   VS       csv 3358   17 467.4 Kb 2023-09-30 23:58:49

Filter DM data

datastep: columns decreased from 24 to 3

# A tibble: 85 × 3
   USUBJID    ARM   ARMCD
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 ABC-01-049 ARM D 4    
 2 ABC-01-050 ARM B 2    
 3 ABC-01-051 ARM A 1    
 4 ABC-01-052 ARM C 3    
 5 ABC-01-053 ARM B 2    
 6 ABC-01-054 ARM D 4    
 7 ABC-01-055 ARM C 3    
 8 ABC-01-056 ARM A 1    
 9 ABC-01-113 ARM D 4    
10 ABC-01-114 ARM B 2    
# ℹ 75 more rows
# ℹ Use `print(n = ...)` to see more rows

Get population counts

proc_freq: input data set 85 rows and 3 columns
           tables: ARM
           output: long
           view: TRUE
           output: 1 datasets

# A tibble: 1 × 6
  VAR   STAT  `ARM A` `ARM B` `ARM C` `ARM D`
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 ARM   CNT        20      21      21      23

Prepare table data

datastep: columns decreased from 27 to 5

# A tibble: 145 × 5
   USUBJID    ARM   AESEV    AESOC                                           AEDECOD
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;                                           &lt;chr&gt;  
 1 ABC-01-049 ARM D MODERATE Investigations                                  BLOOD …
 2 ABC-01-049 ARM D MODERATE Investigations                                  BLOOD …
 3 ABC-01-049 ARM D MILD     Musculoskeletal and connective tissue disorders MUSCUL…
 4 ABC-01-049 ARM D MILD     Nervous system disorders                        HEADAC…
 5 ABC-01-049 ARM D MODERATE Investigations                                  LABORA…
 6 ABC-01-050 ARM B MILD     Respiratory, thoracic and mediastinal disorders UPPER …
 7 ABC-01-050 ARM B MILD     Skin and subcutaneous tissue disorders          RASH   
 8 ABC-01-051 ARM A MILD     Nervous system disorders                        HEADAC…
 9 ABC-01-051 ARM A MILD     Nervous system disorders                        HEADAC…
10 ABC-01-051 ARM A MILD     General disorders and administration site cond… INFLUE…
# ℹ 135 more rows
# ℹ Use `print(n = ...)` to see more rows

=========================================================================
Prepare Formats
=========================================================================

# A format catalog: 4 formats
- $CNT: type S, "%3d"
- $PCT: type S, "(%5.1f)"
- $CAT2: type V, 3 elements
- $SEVN: type V, 3 elements

=========================================================================
Perform Calculations
=========================================================================

Get SOC Frequencies

proc_freq: input data set 145 rows and 5 columns
           tables: AESOC * AESEV
           by: ARM
           view: TRUE
           output: 1 datasets

# A tibble: 240 × 8
   BY    VAR1  VAR2  CAT1                                    CAT2      N   CNT   PCT
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;                                   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 ARM A AESOC AESEV Blood and lymphatic system disorders    MILD     37     0     0
 2 ARM A AESOC AESEV Blood and lymphatic system disorders    MODE…    37     0     0
 3 ARM A AESOC AESEV Blood and lymphatic system disorders    SEVE…    37     0     0
 4 ARM A AESOC AESEV Cardiac disorders                       MILD     37     0     0
 5 ARM A AESOC AESEV Cardiac disorders                       MODE…    37     0     0
 6 ARM A AESOC AESEV Cardiac disorders                       SEVE…    37     0     0
 7 ARM A AESOC AESEV Congenital, familial and genetic disor… MILD     37     0     0
 8 ARM A AESOC AESEV Congenital, familial and genetic disor… MODE…    37     0     0
 9 ARM A AESOC AESEV Congenital, familial and genetic disor… SEVE…    37     0     0
10 ARM A AESOC AESEV Ear and labyrinth disorders             MILD     37     0     0
# ℹ 230 more rows
# ℹ Use `print(n = ...)` to see more rows

Combine columns for SOC

datastep: columns decreased from 8 to 7

# A tibble: 240 × 7
   BY    VAR   CAT                                        CAT2       N VARORD CNTPCT
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;                                      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
 1 ARM A AESOC Blood and lymphatic system disorders       Mild      37      1 "  0 …
 2 ARM A AESOC Blood and lymphatic system disorders       Moder…    37      1 "  0 …
 3 ARM A AESOC Blood and lymphatic system disorders       Severe    37      1 "  0 …
 4 ARM A AESOC Cardiac disorders                          Mild      37      1 "  0 …
 5 ARM A AESOC Cardiac disorders                          Moder…    37      1 "  0 …
 6 ARM A AESOC Cardiac disorders                          Severe    37      1 "  0 …
 7 ARM A AESOC Congenital, familial and genetic disorders Mild      37      1 "  0 …
 8 ARM A AESOC Congenital, familial and genetic disorders Moder…    37      1 "  0 …
 9 ARM A AESOC Congenital, familial and genetic disorders Severe    37      1 "  0 …
10 ARM A AESOC Ear and labyrinth disorders                Mild      37      1 "  0 …
# ℹ 230 more rows
# ℹ Use `print(n = ...)` to see more rows

Pivot SOC frequencies

proc_transpose: input data set 240 rows and 7 columns
                by: CAT CAT2
                var: CNTPCT
                id: BY
                copy: VAR VARORD
                name: NAME
                output dataset 60 rows and 9 columns

# A tibble: 60 × 9
   VAR   CAT                      CAT2  VARORD NAME  `ARM A` `ARM B` `ARM C` `ARM D`
   &lt;chr&gt; &lt;chr&gt;                    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 AESOC Blood and lymphatic sys… Mild       1 CNTP… "  0 (… "  0 (… "  0 (… "  0 (…
 2 AESOC Cardiac disorders        Mild       1 CNTP… "  0 (… "  0 (… "  0 (… "  2 (…
 3 AESOC Congenital, familial an… Mild       1 CNTP… "  0 (… "  1 (… "  0 (… "  0 (…
 4 AESOC Ear and labyrinth disor… Mild       1 CNTP… "  0 (… "  0 (… "  0 (… "  0 (…
 5 AESOC Endocrine disorders      Mild       1 CNTP… "  0 (… "  0 (… "  1 (… "  0 (…
 6 AESOC Gastrointestinal disord… Mild       1 CNTP… "  0 (… "  4 (… "  0 (… "  2 (…
 7 AESOC General disorders and a… Mild       1 CNTP… "  2 (… "  0 (… "  3 (… "  2 (…
 8 AESOC Infections and infestat… Mild       1 CNTP… "  7 (… "  7 (… "  6 (… "  6 (…
 9 AESOC Injury, poisoning and p… Mild       1 CNTP… "  0 (… "  0 (… "  0 (… "  1 (…
10 AESOC Investigations           Mild       1 CNTP… "  4 (… "  1 (… "  2 (… "  5 (…
# ℹ 50 more rows
# ℹ Use `print(n = ...)` to see more rows

datastep: columns started with 9 and ended with 9

# A tibble: 60 × 9
   VAR   AESOC               SEVERITY VARORD `ARM A` `ARM B` `ARM C` `ARM D` AEDECOD
   &lt;chr&gt; &lt;chr&gt;               &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 AESOC Blood and lymphati… Mild          1 "  0 (… "  0 (… "  0 (… "  0 (… &lt;NA&gt;   
 2 AESOC Cardiac disorders   Mild          1 "  0 (… "  0 (… "  0 (… "  2 (… &lt;NA&gt;   
 3 AESOC Congenital, famili… Mild          1 "  0 (… "  1 (… "  0 (… "  0 (… &lt;NA&gt;   
 4 AESOC Ear and labyrinth … Mild          1 "  0 (… "  0 (… "  0 (… "  0 (… &lt;NA&gt;   
 5 AESOC Endocrine disorders Mild          1 "  0 (… "  0 (… "  1 (… "  0 (… &lt;NA&gt;   
 6 AESOC Gastrointestinal d… Mild          1 "  0 (… "  4 (… "  0 (… "  2 (… &lt;NA&gt;   
 7 AESOC General disorders … Mild          1 "  2 (… "  0 (… "  3 (… "  2 (… &lt;NA&gt;   
 8 AESOC Infections and inf… Mild          1 "  7 (… "  7 (… "  6 (… "  6 (… &lt;NA&gt;   
 9 AESOC Injury, poisoning … Mild          1 "  0 (… "  0 (… "  0 (… "  1 (… &lt;NA&gt;   
10 AESOC Investigations      Mild          1 "  4 (… "  1 (… "  2 (… "  5 (… &lt;NA&gt;   
# ℹ 50 more rows
# ℹ Use `print(n = ...)` to see more rows

Get PT Frequencies

proc_freq: input data set 145 rows and 5 columns
           tables: AEDECOD * AESEV
           by: ARM
           view: TRUE
           output: 1 datasets

# A tibble: 876 × 7
   BY    VAR1    VAR2  CAT1                              CAT2       CNT   PCT
   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;                             &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
 1 ARM A AEDECOD AESEV ANXIETY                           MILD         0  0   
 2 ARM A AEDECOD AESEV ANXIETY                           MODERATE     0  0   
 3 ARM A AEDECOD AESEV ANXIETY                           SEVERE       0  0   
 4 ARM A AEDECOD AESEV APPLICATION SITE HYPERSENSITIVITY MILD         0  0   
 5 ARM A AEDECOD AESEV APPLICATION SITE HYPERSENSITIVITY MODERATE     0  0   
 6 ARM A AEDECOD AESEV APPLICATION SITE HYPERSENSITIVITY SEVERE       0  0   
 7 ARM A AEDECOD AESEV APPLICATION SITE IRRITATION       MILD         0  0   
 8 ARM A AEDECOD AESEV APPLICATION SITE IRRITATION       MODERATE     0  0   
 9 ARM A AEDECOD AESEV APPLICATION SITE IRRITATION       SEVERE       0  0   
10 ARM A AEDECOD AESEV BACK PAIN                         MILD         2  5.41
# ℹ 866 more rows
# ℹ Use `print(n = ...)` to see more rows

Get unique SOC and PT combinations

proc_sort: input data set 73 rows and 5 columns
           by: AESOC AEDECOD
           keep: AESOC AEDECOD
           order: a a
           options: nodupkey
           output data set 73 rows and 2 columns

# A tibble: 73 × 2
   AESOC                                      AEDECOD             
   &lt;chr&gt;                                      &lt;chr&gt;               
 1 Blood and lymphatic system disorders       NEUTROPENIA         
 2 Cardiac disorders                          PALPITATIONS        
 3 Cardiac disorders                          SINUS BRADYCARDIA   
 4 Congenital, familial and genetic disorders DERMOID CYST        
 5 Ear and labyrinth disorders                VERTIGO             
 6 Endocrine disorders                        PARATHYROID DISORDER
 7 Gastrointestinal disorders                 DIARRHOEA           
 8 Gastrointestinal disorders                 FOOD POISONING      
 9 Gastrointestinal disorders                 TOOTHACHE           
10 Gastrointestinal disorders                 VOMITING            
# ℹ 63 more rows
# ℹ Use `print(n = ...)` to see more rows

Combine columns for PT

datastep: columns decreased from 7 to 6

# A tibble: 876 × 6
   BY    VAR     CAT                               CAT2     VARORD CNTPCT       
   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;                             &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;        
 1 ARM A AEDECOD ANXIETY                           Mild          2 "  0 (  0.0)"
 2 ARM A AEDECOD ANXIETY                           Moderate      2 "  0 (  0.0)"
 3 ARM A AEDECOD ANXIETY                           Severe        2 "  0 (  0.0)"
 4 ARM A AEDECOD APPLICATION SITE HYPERSENSITIVITY Mild          2 "  0 (  0.0)"
 5 ARM A AEDECOD APPLICATION SITE HYPERSENSITIVITY Moderate      2 "  0 (  0.0)"
 6 ARM A AEDECOD APPLICATION SITE HYPERSENSITIVITY Severe        2 "  0 (  0.0)"
 7 ARM A AEDECOD APPLICATION SITE IRRITATION       Mild          2 "  0 (  0.0)"
 8 ARM A AEDECOD APPLICATION SITE IRRITATION       Moderate      2 "  0 (  0.0)"
 9 ARM A AEDECOD APPLICATION SITE IRRITATION       Severe        2 "  0 (  0.0)"
10 ARM A AEDECOD BACK PAIN                         Mild          2 "  2 (  5.4)"
# ℹ 866 more rows
# ℹ Use `print(n = ...)` to see more rows

Pivot PT frequencies

proc_transpose: input data set 876 rows and 6 columns
                by: CAT CAT2
                var: CNTPCT
                id: BY
                copy: VAR VARORD
                name: NAME
                output dataset 219 rows and 9 columns

# A tibble: 219 × 9
   VAR     CAT                    CAT2  VARORD NAME  `ARM A` `ARM B` `ARM C` `ARM D`
   &lt;chr&gt;   &lt;chr&gt;                  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 AEDECOD ANXIETY                Mild       2 CNTP… "  0 (… "  0 (… "  0 (… "  1 (…
 2 AEDECOD APPLICATION SITE HYPE… Mild       2 CNTP… "  0 (… "  0 (… "  1 (… "  0 (…
 3 AEDECOD APPLICATION SITE IRRI… Mild       2 CNTP… "  0 (… "  0 (… "  1 (… "  1 (…
 4 AEDECOD BACK PAIN              Mild       2 CNTP… "  2 (… "  0 (… "  0 (… "  1 (…
 5 AEDECOD BASAL CELL CARCINOMA   Mild       2 CNTP… "  0 (… "  1 (… "  0 (… "  0 (…
 6 AEDECOD BLOOD GLUCOSE INCREAS… Mild       2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (…
 7 AEDECOD BLOOD PARATHYROID HOR… Mild       2 CNTP… "  0 (… "  1 (… "  0 (… "  0 (…
 8 AEDECOD BLOOD PARATHYROID HOR… Mild       2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (…
 9 AEDECOD BLOOD PRESSURE INCREA… Mild       2 CNTP… "  1 (… "  0 (… "  0 (… "  1 (…
10 AEDECOD BLOOD TRIGLYCERIDES I… Mild       2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (…
# ℹ 209 more rows
# ℹ Use `print(n = ...)` to see more rows

Join in SOC

datastep: columns increased from 9 to 11

# A tibble: 219 × 11
   VAR    AEDECOD SEVERITY VARORD NAME  `ARM A` `ARM B` `ARM C` `ARM D` AESOC AESEVN
   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;
 1 AEDEC… Anxiety Mild          2 CNTP… "  0 (… "  0 (… "  0 (… "  1 (… Psyc…      1
 2 AEDEC… Anxiety Severe        2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Psyc…      3
 3 AEDEC… Anxiety Moderate      2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Psyc…      2
 4 AEDEC… Applic… Severe        2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Gene…      3
 5 AEDEC… Applic… Moderate      2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Gene…      2
 6 AEDEC… Applic… Mild          2 CNTP… "  0 (… "  0 (… "  1 (… "  0 (… Gene…      1
 7 AEDEC… Applic… Mild          2 CNTP… "  0 (… "  0 (… "  1 (… "  1 (… Gene…      1
 8 AEDEC… Applic… Severe        2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Gene…      3
 9 AEDEC… Applic… Moderate      2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Gene…      2
10 AEDEC… Back P… Severe        2 CNTP… "  0 (… "  0 (… "  0 (… "  0 (… Musc…      3
# ℹ 209 more rows
# ℹ Use `print(n = ...)` to see more rows

Get frequencies for all events

proc_freq: input data set 145 rows and 5 columns
           tables: AESEV
           by: ARM
           view: TRUE
           output: 1 datasets

# A tibble: 12 × 6
   BY    VAR   CAT          N   CNT   PCT
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 ARM A AESEV MILD        37    27 73.0 
 2 ARM A AESEV MODERATE    37    10 27.0 
 3 ARM A AESEV SEVERE      37     0  0   
 4 ARM B AESEV MILD        32    24 75   
 5 ARM B AESEV MODERATE    32     6 18.8 
 6 ARM B AESEV SEVERE      32     2  6.25
 7 ARM C AESEV MILD        36    29 80.6 
 8 ARM C AESEV MODERATE    36     7 19.4 
 9 ARM C AESEV SEVERE      36     0  0   
10 ARM D AESEV MILD        40    31 77.5 
11 ARM D AESEV MODERATE    40     9 22.5 
12 ARM D AESEV SEVERE      40     0  0   

Combine all events.

datastep: columns decreased from 6 to 5

# A tibble: 12 × 5
   BY    VAR   CNTPCT        SEVERITY VARORD
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt;
 1 ARM A AESEV " 27 ( 73.0)" Mild          0
 2 ARM A AESEV " 10 ( 27.0)" Moderate      0
 3 ARM A AESEV "  0 (  0.0)" Severe        0
 4 ARM B AESEV " 24 ( 75.0)" Mild          0
 5 ARM B AESEV "  6 ( 18.8)" Moderate      0
 6 ARM B AESEV "  2 (  6.2)" Severe        0
 7 ARM C AESEV " 29 ( 80.6)" Mild          0
 8 ARM C AESEV "  7 ( 19.4)" Moderate      0
 9 ARM C AESEV "  0 (  0.0)" Severe        0
10 ARM D AESEV " 31 ( 77.5)" Mild          0
11 ARM D AESEV "  9 ( 22.5)" Moderate      0
12 ARM D AESEV "  0 (  0.0)" Severe        0

Prepare data for reporting

proc_transpose: input data set 12 rows and 5 columns
                by: SEVERITY
                var: CNTPCT
                id: BY
                copy: VAR VARORD
                name: NAME
                output dataset 3 rows and 8 columns

# A tibble: 3 × 8
  VAR   SEVERITY VARORD NAME   `ARM A`       `ARM B`       `ARM C`       `ARM D`    
  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;      
1 AESEV Mild          0 CNTPCT " 27 ( 73.0)" " 24 ( 75.0)" " 29 ( 80.6)" " 31 ( 77.…
2 AESEV Moderate      0 CNTPCT " 10 ( 27.0)" "  6 ( 18.8)" "  7 ( 19.4)" "  9 ( 22.…
3 AESEV Severe        0 CNTPCT "  0 (  0.0)" "  2 (  6.2)" "  0 (  0.0)" "  0 (  0.…

Clean up

datastep: columns increased from 8 to 9

# A tibble: 3 × 9
  VAR   SEVERITY VARORD `ARM A`       `ARM B`       `ARM C`    `ARM D` AESOC AEDECOD
  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  
1 AESEV Mild          0 " 27 ( 73.0)" " 24 ( 75.0)" " 29 ( 80… " 31 (… All … "All P…
2 AESEV Moderate      0 " 10 ( 27.0)" "  6 ( 18.8)" "  7 ( 19… "  9 (… All … "All P…
3 AESEV Severe        0 "  0 (  0.0)" "  2 (  6.2)" "  0 (  0… "  0 (… All … "All P…

Stack SOC and PT counts

datastep: columns increased from 9 to 10

# A tibble: 282 × 10
   VAR   AESOC        AEDECOD SEVERITY AESEVN VARORD `ARM A` `ARM B` `ARM C` `ARM D`
   &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 AESOC Blood and l… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  0 (…
 2 AESOC Cardiac dis… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  2 (…
 3 AESOC Congenital,… All Pr… Mild          1      1 "  0 (… "  1 (… "  0 (… "  0 (…
 4 AESOC Ear and lab… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  0 (…
 5 AESOC Endocrine d… All Pr… Mild          1      1 "  0 (… "  0 (… "  1 (… "  0 (…
 6 AESOC Gastrointes… All Pr… Mild          1      1 "  0 (… "  4 (… "  0 (… "  2 (…
 7 AESOC General dis… All Pr… Mild          1      1 "  2 (… "  0 (… "  3 (… "  2 (…
 8 AESOC Infections … All Pr… Mild          1      1 "  7 (… "  7 (… "  6 (… "  6 (…
 9 AESOC Injury, poi… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  1 (…
10 AESOC Investigati… All Pr… Mild          1      1 "  4 (… "  1 (… "  2 (… "  5 (…
# ℹ 272 more rows
# ℹ Use `print(n = ...)` to see more rows

Select desired columns

datastep: columns decreased from 10 to 4

# A tibble: 94 × 4
   AESOC                                                AEDECOD        AESEVN VARORD
   &lt;chr&gt;                                                &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
 1 Blood and lymphatic system disorders                 All Preferred…      1      1
 2 Cardiac disorders                                    All Preferred…      1      1
 3 Congenital, familial and genetic disorders           All Preferred…      1      1
 4 Ear and labyrinth disorders                          All Preferred…      1      1
 5 Endocrine disorders                                  All Preferred…      1      1
 6 Gastrointestinal disorders                           All Preferred…      1      1
 7 General disorders and administration site conditions All Preferred…      1      1
 8 Infections and infestations                          All Preferred…      1      1
 9 Injury, poisoning and procedural complications       All Preferred…      1      1
10 Investigations                                       All Preferred…      1      1
# ℹ 84 more rows
# ℹ Use `print(n = ...)` to see more rows

Output extra rows

datastep: columns started with 4 and ended with 4

# A tibble: 188 × 4
   AESOC                                      AEDECOD             AESEVN VARORD
   &lt;chr&gt;                                      &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;
 1 Blood and lymphatic system disorders       All Preferred Terms      0      1
 2 Blood and lymphatic system disorders       All Preferred Terms     -1      1
 3 Cardiac disorders                          All Preferred Terms      0      1
 4 Cardiac disorders                          All Preferred Terms     -1      1
 5 Congenital, familial and genetic disorders All Preferred Terms      0      1
 6 Congenital, familial and genetic disorders All Preferred Terms     -1      1
 7 Ear and labyrinth disorders                All Preferred Terms      0      1
 8 Ear and labyrinth disorders                All Preferred Terms     -1      1
 9 Endocrine disorders                        All Preferred Terms      0      1
10 Endocrine disorders                        All Preferred Terms     -1      1
# ℹ 178 more rows
# ℹ Use `print(n = ...)` to see more rows

Set additonal rows

datastep: columns started with 10 and ended with 10

# A tibble: 470 × 10
   VAR   AESOC        AEDECOD SEVERITY AESEVN VARORD `ARM A` `ARM B` `ARM C` `ARM D`
   &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 AESOC Blood and l… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  0 (…
 2 AESOC Cardiac dis… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  2 (…
 3 AESOC Congenital,… All Pr… Mild          1      1 "  0 (… "  1 (… "  0 (… "  0 (…
 4 AESOC Ear and lab… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  0 (…
 5 AESOC Endocrine d… All Pr… Mild          1      1 "  0 (… "  0 (… "  1 (… "  0 (…
 6 AESOC Gastrointes… All Pr… Mild          1      1 "  0 (… "  4 (… "  0 (… "  2 (…
 7 AESOC General dis… All Pr… Mild          1      1 "  2 (… "  0 (… "  3 (… "  2 (…
 8 AESOC Infections … All Pr… Mild          1      1 "  7 (… "  7 (… "  6 (… "  6 (…
 9 AESOC Injury, poi… All Pr… Mild          1      1 "  0 (… "  0 (… "  0 (… "  1 (…
10 AESOC Investigati… All Pr… Mild          1      1 "  4 (… "  1 (… "  2 (… "  5 (…
# ℹ 460 more rows
# ℹ Use `print(n = ...)` to see more rows

Sort combined rows

proc_sort: input data set 470 rows and 10 columns
           by: AESOC VARORD AEDECOD AESEVN
           keep: VAR AESOC AEDECOD SEVERITY AESEVN VARORD ARM A ARM B ARM C ARM D
           order: a a a a
           output data set 470 rows and 10 columns

# A tibble: 470 × 10
   VAR   AESOC        AEDECOD SEVERITY AESEVN VARORD `ARM A` `ARM B` `ARM C` `ARM D`
   &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 &lt;NA&gt;  All Adverse… "All P… &lt;NA&gt;         -1      0  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;  
 2 &lt;NA&gt;  All Adverse… "All P… &lt;NA&gt;          0      0  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;  
 3 AESEV All Adverse… "All P… Mild          1      0 " 27 (… " 24 (… " 29 (… " 31 (…
 4 AESEV All Adverse… "All P… Moderate      2      0 " 10 (… "  6 (… "  7 (… "  9 (…
 5 AESEV All Adverse… "All P… Severe        3      0 "  0 (… "  2 (… "  0 (… "  0 (…
 6 &lt;NA&gt;  Blood and l… "All P… &lt;NA&gt;         -1      1  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;  
 7 &lt;NA&gt;  Blood and l… "All P… &lt;NA&gt;          0      1  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;  
 8 AESOC Blood and l… "All P… Mild          1      1 "  0 (… "  0 (… "  0 (… "  0 (…
 9 AESOC Blood and l… "All P… Moderate      2      1 "  0 (… "  0 (… "  1 (… "  0 (…
10 AESOC Blood and l… "All P… Severe        3      1 "  0 (… "  0 (… "  0 (… "  0 (…
# ℹ 460 more rows
# ℹ Use `print(n = ...)` to see more rows

Create stub and paging.

datastep: columns increased from 10 to 12

# A tibble: 470 × 12
   VAR    AESOC AEDECOD SEVERITY AESEVN VARORD `ARM A` `ARM B` `ARM C` `ARM D`  RWNM
   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;
 1 "All … All … "All P… &lt;NA&gt;         -1      0  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       1
 2 "  Al… All … "All P… &lt;NA&gt;          0      0  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       2
 3 "    … All … "All P… Mild          1      0 " 27 (… " 24 (… " 29 (… " 31 (…     3
 4 "    … All … "All P… Moderate      2      0 " 10 (… "  6 (… "  7 (… "  9 (…     4
 5 "    … All … "All P… Severe        3      0 "  0 (… "  2 (… "  0 (… "  0 (…     5
 6 "Bloo… Bloo… "All P… &lt;NA&gt;         -1      1  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       6
 7 "  Al… Bloo… "All P… &lt;NA&gt;          0      1  &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       7
 8 "    … Bloo… "All P… Mild          1      1 "  0 (… "  0 (… "  0 (… "  0 (…     8
 9 "    … Bloo… "All P… Moderate      2      1 "  0 (… "  0 (… "  1 (… "  0 (…     9
10 "    … Bloo… "All P… Severe        3      1 "  0 (… "  0 (… "  0 (… "  0 (…    10
# ℹ 460 more rows
# ℹ 1 more variable: PG &lt;dbl&gt;
# ℹ Use `print(n = ...)` to see more rows

=========================================================================
Create and print report
=========================================================================

Create table object

Create report object

Print report

# A report specification: 24 pages
- file_path: 'C:\Users\dbosa\AppData\Local\Temp\Rtmp4q58ap/example14.rtf'
- output_type: RTF
- units: inches
- orientation: landscape
- margins: top 0.5 bottom 0.5 left 1 right 1
- line size/count: 9/42
- page_header: left=Sponsor: Company, Protocol: ABC-123 right=Page [pg] of [tpg], Database: 2023-10-01
- title 1: 'Table 5.2.4'
- title 2: 'Summary of Treatment-Emergent Adverse Events by MedDRA System Organ Class'
- title 3: 'Preferred Term, and Maximum Severity'
- title 4: '(Safety Population)'
- footnote 1: 'Program: AE_Table.R'
- footnote 2: 'Confidential'
- footnote 3: '2023-10-14 14:27:04'
- content: 
# A table specification:
- data: tibble 'aefinal' 470 rows 12 cols
- show_cols: none
- use_attributes: all
- width: 9
- define: VAR 'System Organ Class
  Preferred Term
    Maximum Grade' 
- define: AEDECOD visible='FALSE' 
- define: ARM A 'Placebo' 
- define: ARM B 'Drug A' 
- define: ARM C 'Drug B' 
- define: ARM D 'Drug C' 
- define: PG visible='FALSE' page_break='TRUE' 

=========================================================================
Clean Up
=========================================================================

Close log

=========================================================================
Log End Time: 2023-10-14 14:27:06.77316
Log Elapsed Time: 0 00:00:07
=========================================================================

</code></pre>
<p>Next: <a href="sassy-intext.html">Example 15: Intext Table</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
